<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
  <div *ngFor="let p of filtered" class="border rounded shadow p-4">
    <button
      (click)="toggleWishlist(p)"
      class="absolute top-2 right-2 focus:outline-none transition-transform duration-200"
      [ngClass]="{
        'opacity-100 scale-110': isWishlisted(p),
        'opacity-50 hover:opacity-100 hover:scale-110': !isWishlisted(p)
      }"
    >
      <mat-icon
        class="text-3xl transition-colors duration-200"
        [ngClass]="{
          'text-red-500': isWishlisted(p),
          'text-gray-400': !isWishlisted(p)
        }"
      >
        {{ isWishlisted(p) ? 'favorite' : 'favorite_border' }}
      </mat-icon>
    </button>



    <img
      [src]="p.image"
      [alt]="p.title"
      class="w-full h-40 object-cover rounded"
    />
    <h3 class="mt-2 font-semibold">{{ p.title }}</h3>
    <p class="text-lg mb-2">{{ p.price | currency:'$' }}</p>

    <div class="flex space-x-2">
      <button (click)="viewDetails(p)" class="flex-1 py-1 rounded border">
        Detay
      </button>
      <button (click)="addToCart(p)" class="flex-1 py-1 rounded bg-green-500 text-white">
        Sepete Ekle
      </button>
      <button
        (click)="addToCompare(p)"
        [disabled]="selectedProducts.length >= 2"
        class="flex-1 py-1 rounded bg-yellow-300"
      >
        Karşılaştır
      </button>
    </div>
  </div>
</div>

<div class="mt-4">
  <button
    (click)="compareSelected()"
    [disabled]="selectedProducts.length !== 2"
    class="px-4 py-2 rounded bg-blue-600 text-white"
  >
    Seçilenleri Karşılaştır ({{ selectedProducts.length }}/2)
  </button>
</div>
