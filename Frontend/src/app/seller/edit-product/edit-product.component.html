<!-- src/app/seller/edit-product/edit-product.component.html -->
<div class="container mx-auto px-4 py-6 space-y-8">

  <!-- Ürün Düzenle Formu -->
  <form
    *ngIf="productForm"
    [formGroup]="productForm"
    (ngSubmit)="onProductSubmit()"
    class="space-y-4 bg-white p-6 rounded shadow"
  >
    <h2 class="text-2xl font-semibold mb-4">Ürünü Düzenle</h2>

    <div>
      <label class="block mb-1 font-medium">Ad</label>
      <input formControlName="name" class="border rounded p-2 w-full"/>
    </div>

    <div>
      <label class="block mb-1 font-medium">Açıklama</label>
      <textarea formControlName="description" class="border rounded p-2 w-full"></textarea>
    </div>

    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="block mb-1 font-medium">Fiyat</label>
        <input type="number" formControlName="price" class="border rounded p-2 w-full"/>
      </div>
      <div>
        <label class="block mb-1 font-medium">Stok</label>
        <input type="number" formControlName="stock" class="border rounded p-2 w-full"/>
      </div>
    </div>

    <div>
      <label class="block mb-1 font-medium">Görsel URL</label>
      <input formControlName="imageUrl" class="border rounded p-2 w-full"/>
    </div>

    <!-- Gizli status input -->
    <input type="hidden" formControlName="status"/>

    <!-- debug için geçici (click) eklendi -->
    <button
      type="submit"
      (click)="onProductSubmit()"
      class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition"
      [disabled]="productForm.invalid"
    >
      Kaydet
    </button>
  </form>

  <!-- Varyantlar -->
  <ng-container *ngIf="product">
    <section class="bg-white p-6 rounded shadow mt-8">
      <h2 class="text-2xl font-semibold mb-4">Varyantlar</h2>
      <app-variant-list
        [productId]="product.id"
        (edit)="onEditVariant($event)"
        (delete)="onDeleteVariant($event)"
      ></app-variant-list>
    </section>

    <!-- Yeni Varyant / Düzenle -->
    <section class="bg-white p-6 rounded shadow mt-8">
      <h2 class="text-2xl font-semibold mb-4">
        {{ editingVariant ? 'Varyantı Düzenle' : 'Yeni Varyant Ekle' }}
      </h2>
      <app-variant-form
        [productId]="product.id"
        [variant]="editingVariant"
        (saved)="onVariantSaved()"
      ></app-variant-form>
    </section>
  </ng-container>

</div>
